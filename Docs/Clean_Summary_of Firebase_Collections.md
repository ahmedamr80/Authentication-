**clean summary of myFirestore structure + a clear relationship table. Keeping it simple, accurate,and easy to use when designing queries or APIs.**

**ðŸ”¥ High-Level Summary ofYour Firestore Collections**

**1. users**

**Stores player profiles**

| **id**                 | Auto Generated by Firebase                                                                                      |
| ---------------------- | --------------------------------------------------------------------------------------------------------------- |
| **claimedAt**          | timestamp of when a user claims his/her shadow account                                                          |
| **createdAt**          | timestamp of when the account was created                                                                       |
| **createdBy**          | string that take values of either "user" or "admin"                                                             |
| **dateOfBirth**        | timestamp for the date of birth                                                                                 |
| **email**              | email id of the registered account                                                                              |
| **fullName**           | string that contains the full name of the user                                                                  |
| **gender**             | string that takes either "Male" of "Female" - default value is "Male"                                           |
| **hand**               | string that takes "Right", or "Left" or "Both" - default value is "Right"                                       |
| **isAdmin**            | Boolean (true or false) - default is false                                                                      |
| **isShadow**           | Boolean (true or false) - default is false                                                                      |
| **location**           | Abu Dhabi, UAE                                                                                                  |
| **nickname**           | string that capture the nickname of the user                                                                    |
| **notes**              | string for notes                                                                                                |
| **phone**              | string for phone number                                                                                         |
| **photoUrl**           | photo URL                                                                                                       |
| **position**           | string that takes the preferred position in padel court, either "Right" or "Left" - default is "Right"          |
| **previousUid**        | string that takes the previous ID if the player was a shadow user and then claimed his/her account              |
| **registrationStatus** | string that is "active" if the user successfully registered or "pending" if the user is still shadow            |
| **role**               | string that takes "Player" or "Admin" - default is "Player"                                                     |
| **skillLevel**         | String for the skill level : "Intermediate" or "Advanced" or "Expert" or "Beginner" - default is "Intermediate" |
| **uid**                | the active user ID - generally is equal to the id                                                               |
| **updatedAt**          | timestamp for the last update                                                                                   |

**Not tied to a specific event â€”used everywhere else (registrations, teams)**

**Some logic that must beactivated by the code to maintain the integrity of the data:**

| **Field** | **If Value =** | **Then this field** | **Value must be** | **And this filed** | **Value must be** | **And this filed** | **Value must be** |
| --------- | -------------- | ------------------- | ----------------- | ------------------ | ----------------- | ------------------ | ----------------- |
| role      | Admin          | IsAdmin             | TRUE              |                    |                   |                    |                   |
| IsAdmin   | TRUE           | role                | Admin             |                    |                   |                    |                   |
| createdBy | Admin          | isShadow            | TRUE              | registrationStatus | Pending           | previousUid        | id                |
| claimedAt | timestamp      | isShadow            | FALSE             | registrationStatus | Active            | uid                | id                |

**2. clubs**

**Stores padel club information**

* **Club name, address, coordinates**
* **Phone**
* **Picture**
* **Managed by admin users**
* **Used by: events**

**

* * *

**

**3. events**

**Stores event metadata**

| **id**                  | Event Id - Auto populated                                                                                                 |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------- |
| **adminId**             | Auto populated from the user Id who created the event                                                                     |
| **cancellationMessage** | string                                                                                                                    |
| **clubId**              | string that should be populated from a dropdown menu that contains club IDs (which is selected during the event creation) |
| **coordinates**         | lookup field from the clubsâ€™ collection by matching the clubId and fetching the coordinates data from the respective club |
| **createdAt**           | timestamp - auto                                                                                                          |
| **dateTime**            | timestamp of the date and time of the event                                                                               |
| **duration**            | number (in minutes) - Default is 90                                                                                       |
| **eventId**             | EventId should be "Evenxxxxx" where xxxxx is numbers                                                                      |
| **eventName**           | string - event name                                                                                                       |
| **isPublic**            | Boolean (true or false) - default is true                                                                                 |
| **isTeamRegistration**  | Boolean (true or false) - default is false                                                                                |
| **locationName**        | lookup field from the clubsâ€™ collection by matching the clubId and fetching the club name data from the respective club   |
| **logoUrl**             | photo url                                                                                                                 |
| **pricePerPlayer**      | number - in AED - default is 75                                                                                           |
| **registrationsCount**  | calculated field - will be explained later at the registration section                                                    |
| **slotsAvailable**      | number - default is 8                                                                                                     |
| **status**              | the code should automatically calculate this value - explanation is below                                                 |
| **termsAndConditions**  | string                                                                                                                    |
| **unitType**            | String that takes either "Players" or "Teams"                                                                             |

**Event Status Logic:**

**Upcoming:** Futuredate.

**Active:** 1hour before start to 1 hour after start.

**Past:** >1hour after start.

**Cancelled:*** Admintriggered

**Creation Modes:**

**Single PlayerMode**: `slotsAvailable` counts individual players.

**Team Mode**:`isTeamRegistration = true`. `slotsAvailable` counts *teams* (2 players perslot).

Prices aredisplayed as "Per Player" but calculated as "Team Price(x2)".

**4. registrations**

**Stores player or teamregistrations per event  
Two types:**

* Players (unitType: "Players")

| **id**                | Auto by firebase                                                                                                                |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| **confirmedAt**       | timestamp of when the user confirmed to join the event                                                                          |
| **eventId**           | event id connected to this registration                                                                                         |
| **fullNameP1**        | lookup field from the users' collection by matching the playerId and fetching the user fullName data from the respective record |
| **fullNameP2**        | null                                                                                                                            |
| **isPrimary**         | TRUE                                                                                                                            |
| **lookingForPartner** | FALSE                                                                                                                           |
| **partnerStatus**     | null                                                                                                                            |
| **player2Id**         | null                                                                                                                            |
| **playerId**          | user iD which registered - auto populated by the code via the login data                                                        |
| **playerPhotoURL**    | lookup field from the users' collection by matching the playerId and fetching the user photoUrl url from the respective record  |
| **registeredAt**      | timestamp of when the player registered to the event                                                                            |
| **registrationId**    | Auto populated by the code - should be "Regxxxxx" where xxxx are numbers                                                        |
| **status**            | string that takes "CONFIRMED" or "Cancelled" if the player later decided to withdraw from the event                             |
| **teamId**            | null                                                                                                                            |
| **unitType**          | Players                                                                                                                         |
| **waitlistPosition**  | calculated automatically                                                                                                        |

* Teams (unitType: "Teams")

| **id**                                   | Auto by firebase                                                                                                                                                                                                                             |
| ---------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **confirmedAt**                          | timestamp of when the user confirmed to join the event                                                                                                                                                                                       |
| **eventId**                              | event id connected to this registration                                                                                                                                                                                                      |
| **fullNameP1**                           | lookup field from the users' collection by matching the playerId and fetching the user fullName data from the respective record                                                                                                              |
| **fullNameP2**                           | lookup field from the users' collection by matching the player2Id and fetching the user fullName data from the respective record                                                                                                             |
| **isPrimary**                            | Boolean that is TRUE is the user is the one initiated the registration and initiated the invite for partner, and false if the user is the user that is responding to the invitation                                                          |
| **lookingForPartner**                    | Boolean that FALSE, if the partner accepted the invitation or if the player team from the teams collection is confirmed, and True if the invited player declined the invitation or the player team status is pending in the teams collection |
| **partnerStatus**                        | Pending if the player didn't respond yet, confirmed if the player accepts the invitation and denied of the player declined the invitation                                                                                                    |
| **player2Id**                            | auto- captures the playerId which accepted the invitation to be a partner                                                                                                                                                                    |
| **playerId**                             | user iD which registered - auto populated by the code via the login data                                                                                                                                                                     |
| **playerPhotoURL**                       | lookup field from the users' collection by matching the playerId and fetching the user photoUrl URL from the respective record                                                                                                               |
| **registeredAt**                         | timestamp of when the player registered to the event                                                                                                                                                                                         |
| **registrationId**                       | Auto populated by the code - should be "Regxxxxx" where xxxx are numbers                                                                                                                                                                     |
| **status**                               | string that takes "CONFIRMED" or "Cancelled" if the player later decided to withdraw from the event                                                                                                                                          |
| **teamId**                               | auto by fire base - should be "Teamxxxx" where the xxxx are numbers                                                                                                                                                                          |
| **unitType** | Teams                                                                                                                                                                                                                                        |
| **waitlistPosition**                     | calculated automatically                                                                                                                                                                                                                     |

**4.2 Registration System(Transactional-for single player)**

**Atomic Booking:** UsesFirestore Transactions to prevent race conditions (double booking) when thelast slot is taken**.**

**Flow:**

Â  1. User clicks Register.

Â  2. System checks `slotsAvailable` vs `confirmedUnits`.

Â  3. If Team Mode: check point 4.3

Â  4. Outcome:

Â Â Â  **CONFIRMED:** Slot secured.

Â Â Â  **WAITLIST:** Added to FIFO queue with a specific `waitlistPosition`.

**Withdrawal & Promotion:**

Â  * User withdraws â†’ Slot opens.

Â  * System automatically promotes the first eligible waitlist entry(First-In-First-Out).

Â  * Promoted player is notified.

**4.3 Registration System(Advanced Team Logic)**

**If Team Mode:** User mustselect/invite a partner (`player2Id`) to confirm the slot. This system usesatomic transactions to handle the following scenarios in **Team Mode Events:**

**Scenario 1: Successful TeamFormation**

**1. Trigger: Player A registersand selects Player B as a partner.**

**2. System Action:**

Â  *** Create registration with `partnerStatus:'PENDING'`.**

Â  *** Display Player A as **Confirmed**(Initiator).**

Â  *** Display Player B as **PendingConfirmation**.**

Â  *** **Notification:** Send notification toPlayer B: *"Player A has chosen you as a partner. Confirm or Deny?"***

**3. **Confirmation:** Player Baccepts.**

**4. **Result:****

Â  *** Update `partnerStatus` to `'CONFIRMED'`.**

Â  *** **Notification:** Send notification toPlayer A: *"Player B accepted."***

Â  *** **Count:** Increment Confirmed Teams count(+1).**

**#### **Scenario 2: PartnerRejection****

**1. **Trigger:** Player Aregisters and selects Player B.**

**2. **System Action:**Registration created (Pending).**

**3. **Rejection:** Player Bclicks "Deny" (Optional: provides reason).**

**4. **Result:****

Â  *** Update `partnerStatus` to `'DENIED'`.**

Â  *** **Notification:** Send notification toPlayer A: *"Player B denied your request."***

Â  *** **Count:** Team is **NOT** counted.Registration is effectively invalid until Player A selects a new partner andplayer A is moved to **"Single Players"**.**

**#### **Scenario 3: SingleLooking for Partner****

**1. **Trigger:** Player Aregisters for a Team Event but selects **"No Partner"** (or"Find me a partner").**

**2. **Result:****

Â  *** Player A is added to the **"SinglePlayers"** section of the event.**

Â  *** `partnerStatus` is `'NONE'`.**

Â  *** Player A is visible to other Singles forteaming up.**

**#### **Scenario 4: Team Breakup/ Cancellation****

**1. **Trigger:** A Team is fullyconfirmed (A + B). One player (e.g., Player A) cancels/withdraws.**

**2. **Result:****

Â  *** **Notification:** Immediately notify PlayerB: *"Player A cancelled the registration."***

Â  *** **Data Update:****

Â Â Â  *** Remove the "Team" entity.**

Â Â Â  *** Move Player B from "ConfirmedTeams" list to "Single Players" (or "Pending" state).**

Â Â Â  *** Update Player B's record to `partnerStatus:'NONE'` (or similar).**

Â  *** **Count:** Decrement Confirmed Teams count(-1).**

**

* * *

**

**5. teams**

**Stores team entries forteam-based events**

| id               | Auto by firebase                                                                                                                                                                           |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| createdAt        | timestamp of when the user initiated the team request                                                                                                                                      |
| eventId          | event Id connected to the registration                                                                                                                                                     |
| fullNameP1       | lookup field from the users' collection by matching the playerId and fetching the user photoUrl url from the respective record                                                             |
| fullNameP2       | lookup field from the users' collection by matching the playerId and fetching the user photoUrl url from the respective record                                                             |
| player1Confirmed | default is true as the player is the one initiated the request, but in future is the player decided to withdraw and the status of his registration (from P1RegId changed) then it is false |
| player1Id        | the user Id who created the request                                                                                                                                                        |
| player2Confirmed | true if the responder confirms, otherwise, false                                                                                                                                           |
| player2Id        | includes the partner id from the users collection (the person to whom the invitation was sent to)                                                                                          |
| status           | confirmed if player1Confirmed & player2Confirmed are true, otherwise Pending                                                                                                               |
| teamId           | lookup field from the registrations collection by matching the P1RegId and fetching the teamId from the respective record                                                                  |
| P1RegId          | registration id of player 1 who is the initiator of the request                                                                                                                            |
| P2RegId          | registration id of player 2 who is the responder to the request                                                                                                                            |

**Used by:**

* **registrations (team registrations use the teamId)**

Basically to form a clear ideaabout the team, we will need to track 2 registrations IDs:

Â·Â Â Â Â Â Â Â Â  1 from the initiatorP1RegId

Â·Â Â Â Â Â Â Â Â  1 from the responderP2RegId

**

* * *

**

**6. counters**

used to generate incremental IDs  
(e.g., REG001, TEAM001, EVENT001)  
Not directly linked to other collections, but used by backend logic.

**

* * *

**

**7. notifications**

**Notifications sent to players**

* stores userId + message + eventId  
  
  

**

* * *

**

**ðŸ“Š Relationship Table(Simple & Clear)**

| **Collection** | **Linked To** | **Relationship Type**           | **Notes**                                                                                          |
| -------------- | ------------- | ------------------------------- | -------------------------------------------------------------------------------------------------- |
| users          | registrations | 1 user â†’ many registrations     | Via playerId (but only 1 per Event)                                                                |
| users          | teams         | 1 user â†’ many teams             | As player1Id/player2Id                                                                             |
| users          | events        | 1 user â†’ 1 events               | Via uid                                                                                            |
| clubs          | events        | 1 club â†’ many events            | Via clubId                                                                                         |
| events         | registrations | 1 event â†’ many registrations    | Via eventId                                                                                        |
| events         | teams         | 1 event â†’ many teams            | Via eventId                                                                                        |
| teams          | users         | many-to-many                    | 2 users per team                                                                                   |
| teams          | registrations | 1 team â†’ 2 registrations(Teams) | unitType = "Teams"<br> P1RegId = id of player 1 registration P2RegId = id of player 2 registration |
| registrations  | users         | player registration             | playerId                                                                                           |

**

* * *

**

**ðŸ“ In Short**

* **users = all players**
* **clubs = event venues**
* **events = available tournaments**
* **teams = team datasets for doubles**
* **registrations = seat booking for events**
* **counters = internal ID generator**
* **notifications = messaging layer**

Automation Prompts

*These are hardcoded templatesused by the backend.*

1. **Event Summary:**

Â  > "Generate a short admin-ready summary (2-3 lines) for:{{eventName}}, Date: {{dateTime}}, Slots: {{slotsAvailable}} {{unitType}}.Tone: Concise, suitable for email."

2. **Waitlist Promotion:**

Â  > "Write a short urgent message: Event {{eventName}}. You arepromoted. Confirm within 10 mins. Tone: Urgent."

3. **Cancellation:**

Â  > "Draft a polite cancellation message for {{eventName}}.Reason: {{cancellationMessage}}. Tone: Apologetic."

4. **Partner InviteNotification:**

Â  > "Trigger: New Team Reg. Prompt: 'Player {{playerAName}} wantsto team up with you for {{eventName}} on {{date}}. Action: Confirm or Deny inapp.'"

5. **Partner RejectionNotification:**

Â  > "Trigger: Partner Deny. Prompt: '{{playerBName}} declined yourteam invite for {{eventName}}. You are now listed as a single player. Visit theapp to find a new partner.'"

6. **Team CancellationNotification:**

Â  > "Trigger: Cancellation (Scen 4). Prompt: 'Urgent: Your partner{{playerAName}} cancelled their registration for {{eventName}}. You have beenmoved to the Single Players list. Please find a new partner to secure your teamslot.'"

* * *
